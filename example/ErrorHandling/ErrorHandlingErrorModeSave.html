---
layout: default
title: ErrorMode saving Errors
permalink: /example/ErrorHandling/ErrorHandlingErrorModeSave/
---

<div class='card-panel waves-effect waves-dark yellow darken-4' style=' width: 100%; padding: 10px;' >
    <span class='white-text'>Work in progress, these are autogenerated examples from code</span>
</div>

<h4>ErrorHandling: ErrorMode saving Errors</h4>
<h5>Read the file saving bad records</h5>

<div class='highlight-title'> RunEngine.cs</div>
{% highlight csharp %}

        /// <summary>
        /// Run an example of running a file with an error using the
        /// ErrorMode option to capture bad records and then saving them
        /// </summary>
        public override void Run()
        {
            var engine = new DelimitedFileEngine<Customer>();

            // Switch error mode on
            engine.ErrorManager.ErrorMode = ErrorMode.SaveAndContinue;

            //  This fails with not in enumeration error
            Customer[] customers = engine.ReadFile("Input.txt");

            if (engine.ErrorManager.HasErrors)
                engine.ErrorManager.SaveErrors("errors.out");
            LoadErrors();
        }

        
{%  endhighlight %}



<div class='highlight-title'> LoadErrors.cs</div>
{% highlight csharp %}

        /// <summary>
        /// Load errors and display on console
        /// </summary>
        private void LoadErrors()
        {
            // sometime later you can read it back
            ErrorInfo[] errors = ErrorManager.LoadErrors("errors.out");

            // This will display error from line 2 of the file.
            foreach (var err in errors) {
                this.Console.WriteLine();
                this.Console.WriteLine("Error on Line number: {0}", err.LineNumber);
                this.Console.WriteLine("Record causing the problem: {0}", err.RecordString);
                this.Console.WriteLine("Complete exception information: {0}", err.ExceptionInfo.ToString());
            }
        }

        
{%  endhighlight %}



<div class='highlight-title'> Customers with Enum.cs</div>
{% highlight csharp %}

        /// <summary>
        /// Sample customer class that is delimited by | default
        /// </summary>
        /// <remarks>
        /// Notice last feild is our enumerator
        /// </remarks>
        [DelimitedRecord("|")]
        public class Customer
        {
            public string CustomerID;
            public string CompanyName;
            public string ContactName;
            public CustomerTitle ContactTitle;
        }

        
{%  endhighlight %}



<div class='highlight-title'> Input.txt</div>
{% highlight csharp %}
ALFKI|Alfreds Futterkiste|Maria Anders|SalesRepresentative
        ANATR|Ana Trujillo Emparedados y helados|Ana Trujillo|NotInEnum
        FRANR|France restauration|Carine Schmitt|MarketingManager
        ANTON|Antonio Moreno Taquer√≠a|Antonio Moreno|Owner
{%  endhighlight %}



<div class='highlight-title'> TheEnumerator.cs</div>
{% highlight csharp %}

        /// <summary>
        /// Different titles describing position in company
        /// </summary>
        public enum CustomerTitle
        {
            Owner,
            SalesRepresentative,
            MarketingManager
        }

        
{%  endhighlight %}



<div class='highlight-title'> Errors.out</div>
{% highlight csharp %}

        
{%  endhighlight %}



<div class='highlight-title'> example_errors_save.html</div>
{% highlight csharp %}
 <h2>Saving and Loading Errors</h2>
         * <blockquote>
         * <p>One interesting feature is the method in the ErrorManager to save the errors to a file,
         * you can do this as follows:</p>
         * ${RunEngine.cs}
         * <p>To load a file with errors you can use the static method:</p>
         * ${LoadErrors.cs}
         * </blockquote>
         
{%  endhighlight %}


