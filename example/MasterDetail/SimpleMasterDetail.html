---
layout: default
title: Simple Master Detail
description: Show how to implement Master detail reading using a selection subroutine
permalink: /example/MasterDetail/SimpleMasterDetail/
editlink:  'https://github.com/MarcosMeli/FileHelpers/edit/master/FileHelpers.Examples/Examples/90.MasterDetail/10.SimpleMasterDetail.cs'
---

<div class='card-panel waves-effect waves-dark white' style='padding: 10px; text-align: right; float: right;'>
    <span class=''>Auto generated from code, click in the <a href='{{ page.editlink }}'><i class='mdi-editor-mode-edit'></i> button</a> to edit it here</span>
</div>

<h4>MasterDetail: Simple Master Detail</h4>
<div class='indent'>
  <h5>Show how to implement Master detail reading using a selection subroutine</h5>
  <div class='indent'>

<div class='highlight-title example-code'> RunEngine.cs </div><div class='example-code-high'>
{% highlight csharp %}

/// <summary>
/// Run a record through engine using a selector to create a master detail input
/// </summary>
public override void Run()
{
    var engine = new MasterDetailEngine<Customers, Orders>(new MasterDetailSelector(ExampleSelector));

    var result = engine.ReadFile("Input.txt");

    foreach (var group in result) {
        Console.WriteLine("Customer: {0}", group.Master.CustomerID);
        foreach (var detail in group.Details)
            Console.WriteLine("    Freight: {0}", detail.Freight);
    }
}

/// <summary>
/// Selector to determine whether we have a master or
/// detail record to import
/// </summary>
/// <param name="record">Alpha characters coming in</param>
/// <returns>Selector for master or detail record</returns>
private RecordAction ExampleSelector(string record)
{
    if (record.Length < 2)
        return RecordAction.Skip;

    if (Char.IsLetter(record[0]))
        return RecordAction.Master;
    else
        return RecordAction.Detail;
}


{%  endhighlight %}
</div>



<div class='highlight-title example-input'> Input.txt </div><div class='example-input-high'>
{% highlight csharp %}
ALFKI|Alfreds Futterkiste|Maria Anders|Sales Representative|Obere Str. 57|Berlin|Germany
10248|ALFKI|5|04071996|01081996|16071996|3|32.38
10249|ALFKI|6|05071996|16081996|10071996|1|11.61
10251|ALFKI|3|08071996|05081996|15071996|1|41.34
ANATR|Ana Trujillo Emparedados y helados|Ana Trujillo|Owner|Avda. de la Constitución 2222|México D.F.|Mexico
10252|ANATR|4|09071996|06081996|11071996|2|51.3
ANTON|Antonio Moreno Taquería|Antonio Moreno|Owner|Mataderos  2312|México D.F.|Mexico

{%  endhighlight %}
</div>



<div class='highlight-title example-output'> output.txt </div><div class='example-output-high'>
{% highlight csharp %}

        
{%  endhighlight %}
</div>



<div class='highlight-title example-code'> Master layout.cs </div><div class='example-code-high'>
{% highlight csharp %}

/// <summary>
/// Layout of the master records beginning with alpha characters in input
/// </summary>
[DelimitedRecord("|")]
public class Customers
{
    public string CustomerID;
    public string CompanyName;
    public string ContactName;
    public string ContactTitle;
    public string Address;
    public string City;
    public string Country;
}


{%  endhighlight %}
</div>



<div class='highlight-title example-code'> Detail layout.cs </div><div class='example-code-high'>
{% highlight csharp %}

/// <summary>
/// Layout of the detail records beginning with numerics in input
/// </summary>
[DelimitedRecord("|")]
public class Orders
{
    public int OrderID;
    public string CustomerID;
    public int EmployeeID;
    public DateTime OrderDate;
    public DateTime RequiredDate;
    public DateTime ShippedDate;
    public int ShipVia;
    public decimal Freight;
}


{%  endhighlight %}
</div>



<div class='highlight-title example-console'> Console </div>
<div class='example-console-high'>
<div class='highlight'>
<pre>
Customer: ALFKI
    Freight: 32,38
    Freight: 11,61
    Freight: 41,34
Customer: ANATR
    Freight: 51,3
Customer: ANTON
</pre>
</div>
</div>


  </div>
</div>
